{{> layout/personal-header}}

<!-- 본문 -->
<div class="main container mt-5">
    <div class="row bg-light">
        <!-- 채용 공고 상세 (좌측) -->
        <div class="col-md-8 bg-white p-4">
            <div>
                <div class="d-flex align-items-center gap-2">
                    <h1 class="fs-4 fw-bold mb-0">
                        {{model.title}}                    </h1>
                </div>
                <div class="mb-4">
                    <a
                            href="/personal/companyinfo/{{model.id}}"
                            class="text-muted small mb-4 fw-normal text-decoration-none"
                    >{{company.companyName}}</a
                    >
                </div>

                <!-- 기술 스택 -->
                <div class="mb-4">
                    <h2 class="fs-6 fw-semibold mb-2">기술스택</h2>
                    {{#techStack}}
                        <span class="badge bg-light text-dark">{{.}}</span>
                    {{/techStack}}
                </div>

                <!-- 주요업무 -->
                <div class="mb-4">
                    <h2 class="fs-6 fw-semibold mb-2">주요업무</h2>
                    <p class="small">{{model.responsibility}}</p>
                </div>

                <!-- 자격요건 -->
                <div class="mb-4">
                    <h2 class="fs-6 fw-semibold mb-2">자격요건</h2>
                    <ul class="small ps-3">
                        {{#model.qualification}} <!-- qualification이 비어있지 않으면 출력 -->
                            <li>{{.}}</li>
                        {{/model.qualification}}
                        {{^model.qualification}} <!-- qualification이 비어있으면 이 메시지 출력 -->
                            <li>자격요건이 없습니다.</li>
                        {{/model.qualification}}

                        <!-- 학력 -->
                        <li>학력 :
                            {{#model.educationLevel}}
                                {{model.educationLevel}}
                            {{/model.educationLevel}}
                            {{^model.educationLevel}} <!-- model.educationLevel이 null이면 -->
                                무관
                            {{/model.educationLevel}}
                        </li>

                        <!-- 경력 -->
                        <li>
                            경력 :
                            {{#model.minCareerLevel}}
                                {{model.minCareerLevel}}년 ~
                            {{/model.minCareerLevel}}
                            {{#model.maxCareerLevel}}
                                {{model.maxCareerLevel}}년
                            {{/model.maxCareerLevel}}
                            {{^model.minCareerLevel}}
                                {{#model.maxCareerLevel}}
                                    ~ {{model.maxCareerLevel}}년
                                {{/model.maxCareerLevel}}
                            {{/model.minCareerLevel}}
                            {{^model.maxCareerLevel}}
                                {{#model.minCareerLevel}}
                                    {{model.minCareerLevel}}년 이상
                                {{/model.minCareerLevel}}
                            {{/model.maxCareerLevel}}
                            {{^model.minCareerLevel}}{{^model.maxCareerLevel}}
                                경력 무관
                            {{/model.maxCareerLevel}}{{/model.minCareerLevel}}
                        </li>
                    </ul>
                </div>

                <!-- 우대사항 -->
                <div class="mb-4">
                    <h2 class="fs-6 fw-semibold mb-2">우대사항</h2>
                    <ul class="small ps-3">
                        {{#model.preference}}
                            <li>{{.}}</li>
                        {{/model.preference}}
                    </ul>
                </div>

                <!-- 복지 및 혜택 -->
                <div class="mb-4">
                    <h2 class="fs-6 fw-semibold mb-2">복지 및 혜택</h2>
                    <ul class="small ps-3">
                        {{#model.benefit}}
                            <li>{{.}}</li>
                        {{/model.benefit}}
                    </ul>
                </div>

                <!-- 기타 지원 사항 -->
                <div class="mb-4">
                    <div class="small text-dark">
                        <div class="d-flex">
                            <div class="fw-semibold me-3" style="width: 80px;">마감일</div>
                            <div>{{model.deadline}}</div>
                        </div>
                        <div>
                            <div class="d-flex">
                                <div class="fw-semibold me-3" style="width: 80px;">근무지역</div>
                                <div>{{address.regionName}} {{address.subRegionName}} {{address.addressDetail}}</div>
                            </div>
                            <div class="ps-5 pt-1 d-flex gap-2 small text-secondary">
                                <span>◎</span>
                                <a href="https://map.naver.com/search?query={{address.regionName}} {{address.subRegionName}} {{address.addressDetail}}
                                " class="text-decoration-none" target="_blank">지도보기</a>
                                <span class="text-muted">·</span>
                                <a href="#" id="copyAddressButton" class="text-primary text-decoration-none">주소복사</a>

                                <!-- 복사할 주소를 숨겨서 추가 -->
                                <input type="text" id="hiddenAddress"
                                       value="{{address.regionName}} {{address.subRegionName}} {{address.addressDetail}}"
                                       readonly style="position:absolute; left:-9999px;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 기업/서비스 소개 -->
                <div class="mb-4">
                    <div
                            class="d-flex justify-content-between align-items-center mb-2"
                    >
                        <h2 class="fs-6 fw-semibold">기업/서비스 소개</h2>
                        <a href="/personal/companyinfo/{{model.id}}" class="text-primary small text-decoration-none"
                        >기업상세 정보로 이동</a
                        >
                    </div>
                    <img
                            src="https://images.unsplash.com/photo-1603791440384-56cd371ee9a7?auto=format&fit=crop&w=800&q=80"
                            alt="회사 이미지"
                            class="img-fluid rounded shadow"
                    />
                    <p class="small text-muted mt-2">                    {{model.serviceIntro}}

                    </p>
                </div>
                <div>
                    <h2 class="fs-6 fw-semibold">기타</h2>
                    {{#model.additionalInfo}}
                        {{model.additionalInfo}}
                    {{/model.additionalInfo}}
                    {{^model.additionalInfo}}
                        기타 사항이 없습니다.
                    {{/model.additionalInfo}}
                </div>
            </div>
        </div>

        <!-- 기업정보 + 지원하기 (우측) -->
        <!-- 기업정보 + 지원하기 -->
        <div class="col-md-4 bg-white p-4 mt-4 mt-md-0">
            <!-- 기업 정보 상단 -->
            <div class="d-flex align-items-center mb-4">
                <img
                        src="/img/{{company.logoImage}}"
                        alt="기업 로고"
                        class="me-3 rounded-circle object-fit-cover"
                        width="48"
                        height="48"
                />
                <div>
                    <h5 class="mb-0 fw-bold">{{company.companyName}}</h5>
                    <a href="/personal/companyinfo/{{model.id}}" class="text-decoration-none text-secondary small"
                    >기업정보 보기</a
                    >
                </div>
            </div>

            <!-- 업력 & 홈페이지 -->
            <div class="mb-4">
                <div class="row g-1 mb-2">
                    <div class="col-3 text-muted">업력</div>
                    <div class="col">{{company.establishmentDate}} 설립</div>
                </div>
                <div class="row g-1">
                    <div class="col-3 text-muted">홈페이지</div>
                    <div class="col">
                        <a
                                href="{{company.mainService}}"
                                class="text-primary text-decoration-none"
                                target="_blank"
                        >
                            {{company.mainService}}
                            <i class="fa fa-external-link" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </div>
            <!-- 지원하기 버튼 -->
            <div class="d-grid mb-2">
                <form action="/personal/jobposting/{{model.id}}/apply-form" method="get">
                    <button type="submit" class="btn btn-primary w-100">지원하기</button>
                </form>
            </div>

            <!-- 스크랩하기 버튼 -->
            <button class="btn btn-outline-primary w-100">
                <i class="fa fa-bookmark-o me-2"></i> 스크랩하기
            </button>
        </div>
    </div>
</div>
<!-- 본문 끝 -->

<script>
    document.getElementById('copyAddressButton').addEventListener('click', function (event) {
        event.preventDefault(); // a태그 기본 동작(페이지 튕김) 막기
        const hiddenInput = document.getElementById('hiddenAddress');
        hiddenInput.select();
        hiddenInput.setSelectionRange(0, 99999); // 모바일 대응

        try {
            const successful = document.execCommand('copy');
            if (successful) {
                alert('주소가 복사되었습니다!');
            } else {
                alert('복사에 실패했습니다.');
            }
        } catch (err) {
            alert('복사 중 오류가 발생했습니다.');
        }
    });
</script>


{{> layout/footer}}