{{> layout/personal-header}}

<!-- 본문 -->
<div class="main container mt-5">
    <div>
        <h4 class="fw-bold mt-5 mb-4 fs-2">직무 탐색</h4>

        <!-- 직무 필터 -->
        <div>
            <div class="d-flex flex-wrap gap-2">
                <!-- 전체 버튼 -->
                <form method="get" action="/personal/jobposting/list" class="d-inline">
                    {{#models.selectedRegionId}}
                        <input type="hidden" name="regionId" value="{{models.selectedRegionId}}">
                    {{/models.selectedRegionId}}
                    {{#models.selectedSubRegionId}}
                        <input type="hidden" name="subRegionId" value="{{models.selectedSubRegionId}}">
                    {{/models.selectedSubRegionId}}
                    {{#models.selectedCareer}}
                        <input type="hidden" name="career" value="{{models.selectedCareer}}">
                    {{/models.selectedCareer}}
                    {{#models.selectedTechStackCode}}
                        <input type="hidden" name="techStack" value="{{models.selectedTechStackCode}}">
                    {{/models.selectedTechStackCode}}
                    <button class="btn {{^models.selectedLabels}}btn-primary{{/models.selectedLabels}} {{#models.selectedLabels}}btn-outline-primary{{/models.selectedLabels}} btn-sm rounded-5"
                            type="submit">
                        전체
                    </button>
                </form>

                <!-- 직무 리스트 -->
                {{#models.positions}}
                    <form method="get" action="/personal/jobposting/list" class="d-inline-block">
                        {{#models.selectedRegionId}}
                            <input type="hidden" name="regionId" value="{{models.selectedRegionId}}">
                        {{/models.selectedRegionId}}
                        {{#models.selectedSubRegionId}}
                            <input type="hidden" name="subRegionId" value="{{models.selectedSubRegionId}}">
                        {{/models.selectedSubRegionId}}
                        {{#models.selectedCareer}}
                            <input type="hidden" name="career" value="{{models.selectedCareer}}">
                        {{/models.selectedCareer}}
                        {{#models.selectedTechStackCode}}
                            <input type="hidden" name="techStack" value="{{models.selectedTechStackCode}}">
                        {{/models.selectedTechStackCode}}

                        {{#models.selectedLabels}}
                            <input type="hidden" name="label" value="{{.}}">
                        {{/models.selectedLabels}}

                        <input type="hidden" name="label" value="{{label}}">

                        <button class="btn {{#selected}}btn-primary{{/selected}} {{^selected}}btn-outline-primary{{/selected}} btn-sm rounded-5"
                                type="submit">
                            {{label}}
                        </button>
                    </form>
                {{/models.positions}}            </div>
        </div>
    </div>


    <div class="bg-light mt-4 p-3 rounded">
        <!-- 기술스택 드롭다운 -->
        <div class="dropdown d-inline-block me-2">
            <button class="btn {{#models.selectedTechStackCode}}btn-primary{{/models.selectedTechStackCode}} {{^models.selectedTechStackCode}}btn-outline-primary{{/models.selectedTechStackCode}} dropdown-toggle rounded-5"
                    type="button" data-bs-toggle="dropdown">
                {{#models.selectedTechStackName}}{{models.selectedTechStackName}}{{/models.selectedTechStackName}}
                {{^models.selectedTechStackName}}기술스택{{/models.selectedTechStackName}}
            </button>
            <ul class="dropdown-menu">
                <!-- 전체 (기술스택 선택 해제) -->
                <li>
                    <form method="get" action="/personal/jobposting/list">
                        {{#models.selectedRegionId}}
                            <input type="hidden" name="regionId" value="{{models.selectedRegionId}}">
                        {{/models.selectedRegionId}}
                        {{#models.selectedSubRegionId}}
                            <input type="hidden" name="subRegionId" value="{{models.selectedSubRegionId}}">
                        {{/models.selectedSubRegionId}}
                        {{#models.selectedCareer}}
                            <input type="hidden" name="career" value="{{models.selectedCareer}}">
                        {{/models.selectedCareer}}
                        <input type="hidden" name="techStack" value="">
                        <button class="dropdown-item" type="submit">전체</button>
                    </form>
                </li>

                <!-- 기술스택 리스트 뿌리기 -->
                {{#models.techStacks}}
                    <li>
                        <form method="get" action="/personal/jobposting/list">
                            {{#models.selectedRegionId}}
                                <input type="hidden" name="regionId" value="{{models.selectedRegionId}}">
                            {{/models.selectedRegionId}}
                            {{#models.selectedSubRegionId}}
                                <input type="hidden" name="subRegionId" value="{{models.selectedSubRegionId}}">
                            {{/models.selectedSubRegionId}}
                            {{#models.selectedCareer}}
                                <input type="hidden" name="career" value="{{models.selectedCareer}}">
                            {{/models.selectedCareer}}
                            <input type="hidden" name="techStack" value="{{code}}">
                            <button class="dropdown-item" type="submit">{{code}}</button>
                        </form>
                    </li>
                {{/models.techStacks}}
            </ul>
        </div>


        <!-- 경력 드롭다운 -->
        <!-- 경력 드롭다운 -->
        <div class="dropdown d-inline-block me-2">
            <button class="btn {{#models.selectedCareer}}btn-primary{{/models.selectedCareer}} {{^models.selectedCareer}}btn-outline-primary{{/models.selectedCareer}} dropdown-toggle rounded-5"
                    type="button" data-bs-toggle="dropdown">
                {{#models.selectedCareerName}}{{models.selectedCareerName}}{{/models.selectedCareerName}}
                {{^models.selectedCareerName}}경력{{/models.selectedCareerName}}
            </button>
            <ul class="dropdown-menu">

                <!-- 전체 -->
                <li>
                    <form method="get" action="/personal/jobposting/list">
                        {{#models.selectedRegionId}}
                            <input type="hidden" name="regionId" value="{{models.selectedRegionId}}">
                        {{/models.selectedRegionId}}
                        {{#models.selectedSubRegionId}}
                            <input type="hidden" name="subRegionId" value="{{models.selectedSubRegionId}}">
                        {{/models.selectedSubRegionId}}
                        {{#models.selectedTechStackCode}}
                            <input type="hidden" name="techStack" value="{{models.selectedTechStackCode}}">
                        {{/models.selectedTechStackCode}}
                        <input type="hidden" name="career" value="">
                        <button class="dropdown-item" type="submit">전체</button>
                    </form>
                </li>

                <!-- 신입 -->
                <li>
                    <form method="get" action="/personal/jobposting/list">
                        {{#models.selectedRegionId}}
                            <input type="hidden" name="regionId" value="{{models.selectedRegionId}}">
                        {{/models.selectedRegionId}}
                        {{#models.selectedSubRegionId}}
                            <input type="hidden" name="subRegionId" value="{{models.selectedSubRegionId}}">
                        {{/models.selectedSubRegionId}}
                        {{#models.selectedTechStackCode}}
                            <input type="hidden" name="techStack" value="{{models.selectedTechStackCode}}">
                        {{/models.selectedTechStackCode}}
                        <input type="hidden" name="career" value="0">
                        <button class="dropdown-item" type="submit">신입</button>
                    </form>
                </li>

                <!-- 1년 -->
                <li>
                    <form method="get" action="/personal/jobposting/list">
                        {{#models.selectedRegionId}}
                            <input type="hidden" name="regionId" value="{{models.selectedRegionId}}">
                        {{/models.selectedRegionId}}
                        {{#models.selectedSubRegionId}}
                            <input type="hidden" name="subRegionId" value="{{models.selectedSubRegionId}}">
                        {{/models.selectedSubRegionId}}
                        {{#models.selectedTechStackCode}}
                            <input type="hidden" name="techStack" value="{{models.selectedTechStackCode}}">
                        {{/models.selectedTechStackCode}}
                        <input type="hidden" name="career" value="1">
                        <button class="dropdown-item" type="submit">1년</button>
                    </form>
                </li>

                <!-- 나머지 경력(2년, 3년, 9년, 10년 이상)도 위와 똑같은 방식으로 -->

            </ul>
        </div>


        <!-- 지역(시) 드롭다운 -->
        <div class="dropdown d-inline-block">
            <button class="btn {{#models.selectedRegionId}}btn-primary{{/models.selectedRegionId}} {{^models.selectedRegionId}}btn-outline-primary{{/models.selectedRegionId}} dropdown-toggle rounded-5"
                    type="button" data-bs-toggle="dropdown">
                {{#models.selectedRegionName}}{{models.selectedRegionName}}{{/models.selectedRegionName}}
                {{^models.selectedRegionName}}지역(시){{/models.selectedRegionName}}
            </button>
            <ul class="dropdown-menu">
                {{#models.regions}}
                    <li>
                        <form method="get" action="/personal/jobposting/list">
                            <input type="hidden" name="regionId" value="{{regionId}}">
                            {{#models.selectedSubRegionId}}
                                <input type="hidden" name="subRegionId" value="{{models.selectedSubRegionId}}">
                            {{/models.selectedSubRegionId}}
                            {{#models.selectedCareer}}
                                <input type="hidden" name="career" value="{{models.selectedCareer}}">
                            {{/models.selectedCareer}}
                            {{#models.selectedTechStackCode}}
                                <input type="hidden" name="techStack" value="{{models.selectedTechStackCode}}">
                            {{/models.selectedTechStackCode}}
                            <button class="dropdown-item" type="submit">{{region}}</button>
                        </form>
                    </li>
                {{/models.regions}}
            </ul>
        </div>

        <!-- 지역(군/구) 드롭다운 -->
        <div class="dropdown d-inline-block">
            <button class="btn {{#models.selectedSubRegionId}}btn-primary{{/models.selectedSubRegionId}} {{^models.selectedSubRegionId}}btn-outline-primary{{/models.selectedSubRegionId}} dropdown-toggle rounded-5"
                    type="button" data-bs-toggle="dropdown">
                {{#models.selectedSubRegionName}}{{models.selectedSubRegionName}}{{/models.selectedSubRegionName}}
                {{^models.selectedSubRegionName}}지역(군/구){{/models.selectedSubRegionName}}
            </button>
            <ul class="dropdown-menu">
                {{#models.subRegions}}
                    <li>
                        <form method="get" action="/personal/jobposting/list">
                            {{#models.selectedRegionId}}
                                <input type="hidden" name="regionId" value="{{models.selectedRegionId}}">
                            {{/models.selectedRegionId}}
                            <input type="hidden" name="subRegionId" value="{{subRegionId}}">
                            {{#models.selectedCareer}}
                                <input type="hidden" name="career" value="{{models.selectedCareer}}">
                            {{/models.selectedCareer}}
                            {{#models.selectedTechStackCode}}
                                <input type="hidden" name="techStack" value="{{models.selectedTechStackCode}}">
                            {{/models.selectedTechStackCode}}
                            <button class="dropdown-item" type="submit">{{subRegion}}</button>
                        </form>
                    </li>
                {{/models.subRegions}}
            </ul>
        </div>


        <!-- 인기순/최신순 버튼 -->
        <div class="d-flex flex-row-reverse mt-3 mb-2">
            <button class="btn btn-outline-light text-dark me-3">인기순</button>
            <button class="btn btn-outline-light text-dark">최신순</button>
        </div>

        <!-- 공고 카드 리스트 -->
        <div class="row gx-3 gy-4 ms-2 me-2">
            {{#models.jobPostingList}}
                <div class="col-md-3 col-sm-6">
                    <a href="/상세페이지URL1" class="text-decoration-none text-dark">
                        <div class="mb-3 position-relative">
                            <img src="/img/{{image}}" class="img-fluid rounded">
                            <span class="position-absolute top-0 start-0 badge bg-primary ms-2 mt-2">
                                D-{{dDay}}
                            </span>
                        </div>
                        <div>
                            <div class="position-relative">
                                <div class="mb-2">{{companyName}}</div>
                            </div>
                            <h4 class="mb-2">{{title}}</h4>
                            <div class="mb-3">
                                <div>
                                    <small>
                                        {{#techStacks}}
                                            {{name}} ·
                                        {{/techStacks}}
                                    </small>
                                </div>
                                <div>
                                    <small>{{address}} · 경력 {{career}}</small>
                                </div>
                            </div>
                        </div>
                    </a>
                    <button class="btn btn-outline-primary w-100">
                        <i class="fa fa-bookmark-o me-2"></i> 스크랩하기
                    </button>
                </div>
            {{/models.jobPostingList}}
        </div>
    </div>
</div>
<!-- 본문 끝 -->


{{> layout/footer}}